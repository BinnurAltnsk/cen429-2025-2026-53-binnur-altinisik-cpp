<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TravelExpense Windows Library API Documentation: TravelExpense::SoftHSM Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">TravelExpense Windows Library API Documentation<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">TravelExpense Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_travel_expense.html">TravelExpense</a></li><li class="navelem"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">TravelExpense::SoftHSM Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6fb8347ca19497bb25f5f0a6e696d96f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a6fb8347ca19497bb25f5f0a6e696d96f">ErrorCode</a> = <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">TravelExpense::ErrorCode</a></td></tr>
<tr class="separator:a6fb8347ca19497bb25f5f0a6e696d96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aad0a58fc42af71a6793bf6449a75b24a"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24a">InitStatus</a> { <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24aa02de9649e258d1dd94056e676061e969">NOT_INITIALIZED</a> = 0
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24aadee5f03c2c4e73657824e028494b18c0">INITIALIZED</a> = 1
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24aabb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a> = -1
 }</td></tr>
<tr class="memdesc:aad0a58fc42af71a6793bf6449a75b24a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_soft_h_s_m.html" title="SoftHSM (PKCS#11) kriptografik işlemler modülü">SoftHSM</a> başlatma durumu.  <a href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24a">More...</a><br /></td></tr>
<tr class="separator:aad0a58fc42af71a6793bf6449a75b24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8859119f0e92029bcc9c29081d79021a"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">KeyType</a> { <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021aa78a61f5f64f7ea0d31a7cc487d2b14e8">AES_256</a> = 0
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021aa5b3bf47dace955c9874047820a78d5b8">RSA_2048</a> = 1
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021aac5e459c10e5e8348c719df2702c3abe6">EC_P256</a> = 2
 }</td></tr>
<tr class="memdesc:a8859119f0e92029bcc9c29081d79021a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key tipi.  <a href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">More...</a><br /></td></tr>
<tr class="separator:a8859119f0e92029bcc9c29081d79021a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada96f17213af3032466f091866ca6e42"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42">KeyUsage</a> { <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42a52db93ea6808e2184bfb7a4c8a3c0151">ENCRYPT_DECRYPT</a> = 0
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42a6540894fc3bdc9f2597e6d1d4ea0e190">SIGN_VERIFY</a> = 1
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42a7464a3e54ec3ca720fa0d199d59426a4">WRAP_UNWRAP</a> = 2
, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42abc63603c862fa6bdbb49fae1611c572c">DERIVE</a> = 3
 }</td></tr>
<tr class="memdesc:ada96f17213af3032466f091866ca6e42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key kullanım amaçları  <a href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42">More...</a><br /></td></tr>
<tr class="separator:ada96f17213af3032466f091866ca6e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af71b3824984e7e34e84fc5c0a606b418"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#af71b3824984e7e34e84fc5c0a606b418">initialize</a> (const char *libraryPath=nullptr, const char *tokenLabel=nullptr, const char *pin=nullptr)</td></tr>
<tr class="memdesc:af71b3824984e7e34e84fc5c0a606b418"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'yi başlat ve PKCS#11 kütüphanesini yükle.  <br /></td></tr>
<tr class="separator:af71b3824984e7e34e84fc5c0a606b418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08cccf8f5db8d63231a3b706351b212"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aa08cccf8f5db8d63231a3b706351b212">shutdown</a> ()</td></tr>
<tr class="memdesc:aa08cccf8f5db8d63231a3b706351b212"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'yi kapat ve kaynakları temizle.  <br /></td></tr>
<tr class="separator:aa08cccf8f5db8d63231a3b706351b212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa272e6522244baa0af55f77332e6f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24a">InitStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a0fa272e6522244baa0af55f77332e6f5">getStatus</a> ()</td></tr>
<tr class="memdesc:a0fa272e6522244baa0af55f77332e6f5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> başlatma durumunu kontrol et.  <br /></td></tr>
<tr class="separator:a0fa272e6522244baa0af55f77332e6f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d330cfb5deff1a7731392c78c8a4757"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a0d330cfb5deff1a7731392c78c8a4757">createToken</a> (const char *label, const char *pin, const char *soPin)</td></tr>
<tr class="memdesc:a0d330cfb5deff1a7731392c78c8a4757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Token oluştur (eğer yoksa)  <br /></td></tr>
<tr class="separator:a0d330cfb5deff1a7731392c78c8a4757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd53afa782d6054163658a225a3e3bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf">openToken</a> (const char *label, const char *pin)</td></tr>
<tr class="memdesc:a1dd53afa782d6054163658a225a3e3bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Token aç (oturum başlat)  <br /></td></tr>
<tr class="separator:a1dd53afa782d6054163658a225a3e3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355d45677c9adebfb9afa591275bb8d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a355d45677c9adebfb9afa591275bb8d4">closeToken</a> ()</td></tr>
<tr class="memdesc:a355d45677c9adebfb9afa591275bb8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Token'ı kapat (oturum kapat)  <br /></td></tr>
<tr class="separator:a355d45677c9adebfb9afa591275bb8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a100a3043a4e2c9d8cd6922248a46f335"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a100a3043a4e2c9d8cd6922248a46f335">generateKey</a> (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">KeyType</a> keyType, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42">KeyUsage</a> keyUsage, const char *keyLabel, uint8_t *keyId, size_t &amp;keyIdLen)</td></tr>
<tr class="memdesc:a100a3043a4e2c9d8cd6922248a46f335"><td class="mdescLeft">&#160;</td><td class="mdescRight">Anahtar oluştur (generate key)  <br /></td></tr>
<tr class="separator:a100a3043a4e2c9d8cd6922248a46f335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b9cc48d95cd483ab84818c43ed967d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a04b9cc48d95cd483ab84818c43ed967d">importKey</a> (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">KeyType</a> keyType, const uint8_t *keyData, size_t keyDataLen, const char *keyLabel, uint8_t *keyId, size_t &amp;keyIdLen)</td></tr>
<tr class="memdesc:a04b9cc48d95cd483ab84818c43ed967d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Anahtarı içe aktar (import key)  <br /></td></tr>
<tr class="separator:a04b9cc48d95cd483ab84818c43ed967d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8527db38f2e8d22d54baf72e43315cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#af8527db38f2e8d22d54baf72e43315cf">findKey</a> (const char *keyLabel, uint8_t *keyId, size_t &amp;keyIdLen)</td></tr>
<tr class="memdesc:af8527db38f2e8d22d54baf72e43315cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Anahtarı bul (find key by label)  <br /></td></tr>
<tr class="separator:af8527db38f2e8d22d54baf72e43315cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b7ad5db79291a92b339855944a4208"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aa4b7ad5db79291a92b339855944a4208">deleteKey</a> (const uint8_t *keyId, size_t keyIdLen)</td></tr>
<tr class="memdesc:aa4b7ad5db79291a92b339855944a4208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Anahtarı sil.  <br /></td></tr>
<tr class="separator:aa4b7ad5db79291a92b339855944a4208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa76da1d2f45b48a32039219d89930d6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aa76da1d2f45b48a32039219d89930d6b">encrypt</a> (const uint8_t *keyId, size_t keyIdLen, const void *plaintext, size_t plaintextLen, void *ciphertext, size_t &amp;ciphertextLen, uint8_t *iv=nullptr)</td></tr>
<tr class="memdesc:aa76da1d2f45b48a32039219d89930d6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Veriyi şifrele (encrypt using HSM key)  <br /></td></tr>
<tr class="separator:aa76da1d2f45b48a32039219d89930d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50d97c17003e1b54df285fbf5fa76b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#af50d97c17003e1b54df285fbf5fa76b9">decrypt</a> (const uint8_t *keyId, size_t keyIdLen, const void *ciphertext, size_t ciphertextLen, void *plaintext, size_t &amp;plaintextLen, const uint8_t *iv=nullptr)</td></tr>
<tr class="memdesc:af50d97c17003e1b54df285fbf5fa76b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Veriyi şifre çöz (decrypt using HSM key)  <br /></td></tr>
<tr class="separator:af50d97c17003e1b54df285fbf5fa76b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac14ac62bb1ee91f10908af2ba8f7a832"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ac14ac62bb1ee91f10908af2ba8f7a832">sign</a> (const uint8_t *keyId, size_t keyIdLen, const void *data, size_t dataLen, void *signature, size_t &amp;signatureLen)</td></tr>
<tr class="memdesc:ac14ac62bb1ee91f10908af2ba8f7a832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Veriyi imzala (sign data)  <br /></td></tr>
<tr class="separator:ac14ac62bb1ee91f10908af2ba8f7a832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e1b43ac34b60670eafe4cb1c347335a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a6e1b43ac34b60670eafe4cb1c347335a">verify</a> (const uint8_t *keyId, size_t keyIdLen, const void *data, size_t dataLen, const void *signature, size_t signatureLen)</td></tr>
<tr class="memdesc:a6e1b43ac34b60670eafe4cb1c347335a"><td class="mdescLeft">&#160;</td><td class="mdescRight">İmzayı doğrula (verify signature)  <br /></td></tr>
<tr class="separator:a6e1b43ac34b60670eafe4cb1c347335a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac132d386ec4642b70cbfc87db1dd84f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ac132d386ec4642b70cbfc87db1dd84f3">generateRandom</a> (uint8_t *output, size_t length)</td></tr>
<tr class="memdesc:ac132d386ec4642b70cbfc87db1dd84f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rastgele veri üret (HSM'den güvenli random)  <br /></td></tr>
<tr class="separator:ac132d386ec4642b70cbfc87db1dd84f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627d80f41250c6562b1cd91521787245"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a627d80f41250c6562b1cd91521787245">listTokens</a> (char labels[][64], size_t &amp;count)</td></tr>
<tr class="memdesc:a627d80f41250c6562b1cd91521787245"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mevcut token'ları listele.  <br /></td></tr>
<tr class="separator:a627d80f41250c6562b1cd91521787245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae037de28b34ae8a110a65f222e52ac06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="export_8h.html#a21d78c0dc6e2907cbb76e2b0468cceb6">TRAVELEXPENSE_API</a> <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ae037de28b34ae8a110a65f222e52ac06">listKeys</a> (char labels[][64], size_t &amp;count)</td></tr>
<tr class="memdesc:ae037de28b34ae8a110a65f222e52ac06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mevcut anahtarları listele.  <br /></td></tr>
<tr class="separator:ae037de28b34ae8a110a65f222e52ac06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a6fb8347ca19497bb25f5f0a6e696d96f" name="a6fb8347ca19497bb25f5f0a6e696d96f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb8347ca19497bb25f5f0a6e696d96f">&#9670;&#160;</a></span>ErrorCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">TravelExpense::SoftHSM::ErrorCode</a> = typedef <a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">TravelExpense::ErrorCode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aad0a58fc42af71a6793bf6449a75b24a" name="aad0a58fc42af71a6793bf6449a75b24a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0a58fc42af71a6793bf6449a75b24a">&#9670;&#160;</a></span>InitStatus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24a">TravelExpense::SoftHSM::InitStatus</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> başlatma durumu. </p>
<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> modülünün başlatma durumunu belirtir. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aad0a58fc42af71a6793bf6449a75b24aa02de9649e258d1dd94056e676061e969" name="aad0a58fc42af71a6793bf6449a75b24aa02de9649e258d1dd94056e676061e969"></a>NOT_INITIALIZED&#160;</td><td class="fielddoc"><p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> henüz başlatılmadı </p>
</td></tr>
<tr><td class="fieldname"><a id="aad0a58fc42af71a6793bf6449a75b24aadee5f03c2c4e73657824e028494b18c0" name="aad0a58fc42af71a6793bf6449a75b24aadee5f03c2c4e73657824e028494b18c0"></a>INITIALIZED&#160;</td><td class="fielddoc"><p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> başarıyla başlatıldı </p>
</td></tr>
<tr><td class="fieldname"><a id="aad0a58fc42af71a6793bf6449a75b24aabb1ca97ec761fc37101737ba0aa2e7c5" name="aad0a58fc42af71a6793bf6449a75b24aabb1ca97ec761fc37101737ba0aa2e7c5"></a>ERROR&#160;</td><td class="fielddoc"><p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> başlatma hatası </p>
</td></tr>
</table>

</div>
</div>
<a id="a8859119f0e92029bcc9c29081d79021a" name="a8859119f0e92029bcc9c29081d79021a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8859119f0e92029bcc9c29081d79021a">&#9670;&#160;</a></span>KeyType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">TravelExpense::SoftHSM::KeyType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Key tipi. </p>
<p>Desteklenen kriptografik anahtar tipleri. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8859119f0e92029bcc9c29081d79021aa78a61f5f64f7ea0d31a7cc487d2b14e8" name="a8859119f0e92029bcc9c29081d79021aa78a61f5f64f7ea0d31a7cc487d2b14e8"></a>AES_256&#160;</td><td class="fielddoc"><p>AES-256 simetrik şifreleme anahtarı </p>
</td></tr>
<tr><td class="fieldname"><a id="a8859119f0e92029bcc9c29081d79021aa5b3bf47dace955c9874047820a78d5b8" name="a8859119f0e92029bcc9c29081d79021aa5b3bf47dace955c9874047820a78d5b8"></a>RSA_2048&#160;</td><td class="fielddoc"><p>RSA-2048 asimetrik şifreleme anahtarı </p>
</td></tr>
<tr><td class="fieldname"><a id="a8859119f0e92029bcc9c29081d79021aac5e459c10e5e8348c719df2702c3abe6" name="a8859119f0e92029bcc9c29081d79021aac5e459c10e5e8348c719df2702c3abe6"></a>EC_P256&#160;</td><td class="fielddoc"><p>EC-P256 (secp256r1) eliptik eğri anahtarı </p>
</td></tr>
</table>

</div>
</div>
<a id="ada96f17213af3032466f091866ca6e42" name="ada96f17213af3032466f091866ca6e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada96f17213af3032466f091866ca6e42">&#9670;&#160;</a></span>KeyUsage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42">TravelExpense::SoftHSM::KeyUsage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Key kullanım amaçları </p>
<p>Anahtarın hangi kriptografik işlemler için kullanılabileceğini belirtir. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ada96f17213af3032466f091866ca6e42a52db93ea6808e2184bfb7a4c8a3c0151" name="ada96f17213af3032466f091866ca6e42a52db93ea6808e2184bfb7a4c8a3c0151"></a>ENCRYPT_DECRYPT&#160;</td><td class="fielddoc"><p>Şifreleme ve şifre çözme işlemleri için. </p>
</td></tr>
<tr><td class="fieldname"><a id="ada96f17213af3032466f091866ca6e42a6540894fc3bdc9f2597e6d1d4ea0e190" name="ada96f17213af3032466f091866ca6e42a6540894fc3bdc9f2597e6d1d4ea0e190"></a>SIGN_VERIFY&#160;</td><td class="fielddoc"><p>İmzalama ve doğrulama işlemleri için. </p>
</td></tr>
<tr><td class="fieldname"><a id="ada96f17213af3032466f091866ca6e42a7464a3e54ec3ca720fa0d199d59426a4" name="ada96f17213af3032466f091866ca6e42a7464a3e54ec3ca720fa0d199d59426a4"></a>WRAP_UNWRAP&#160;</td><td class="fielddoc"><p>Anahtar sarma/çözme işlemleri için. </p>
</td></tr>
<tr><td class="fieldname"><a id="ada96f17213af3032466f091866ca6e42abc63603c862fa6bdbb49fae1611c572c" name="ada96f17213af3032466f091866ca6e42abc63603c862fa6bdbb49fae1611c572c"></a>DERIVE&#160;</td><td class="fielddoc"><p>Anahtar türetme işlemleri için. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a355d45677c9adebfb9afa591275bb8d4" name="a355d45677c9adebfb9afa591275bb8d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355d45677c9adebfb9afa591275bb8d4">&#9670;&#160;</a></span>closeToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::closeToken </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Token'ı kapat (oturum kapat) </p>
<p>Token kapat ve session'ı sonlandır.</p>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Açık token session'ını kapatır. Önce logout yapılır, sonra session kapatılır. Session handle ve current slot sıfırlanır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, session açık değilse hiçbir işlem yapmaz ve Success döner.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="a0d330cfb5deff1a7731392c78c8a4757" name="a0d330cfb5deff1a7731392c78c8a4757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d330cfb5deff1a7731392c78c8a4757">&#9670;&#160;</a></span>createToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::createToken </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>soPin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Token oluştur (eğer yoksa) </p>
<p>Token oluştur (simplified - gerçek implementasyonda token creation gerekir)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>Token etiketi </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu </td></tr>
    <tr><td class="paramname">soPin</td><td><a class="el" href="namespace_travel_expense_1_1_security.html">Security</a> Officer PIN kodu </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> token'ları genellikle sistem seviyesinde oluşturulur. Bu fonksiyon sadece token label ve PIN bilgilerini kaydeder. Gerçek token oluşturma işlemi için <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> CLI komutları gerekir.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, simplified bir implementasyon olup gerçek token oluşturma işlemini yapmaz. Sadece parametreleri saklar.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>Token etiketi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">soPin</td><td>SO (<a class="el" href="namespace_travel_expense_1_1_security.html">Security</a> Officer) PIN kodu (kullanılmıyor, nullptr olabilir) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="af50d97c17003e1b54df285fbf5fa76b9" name="af50d97c17003e1b54df285fbf5fa76b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af50d97c17003e1b54df285fbf5fa76b9">&#9670;&#160;</a></span>decrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::decrypt </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyIdLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ciphertext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ciphertextLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>plaintext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>plaintextLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>iv</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Veriyi şifre çöz (decrypt using HSM key) </p>
<p>Şifrelenmiş veriyi çöz (AES-CBC)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Anahtar ID uzunluğu </td></tr>
    <tr><td class="paramname">ciphertext</td><td>Şifrelenmiş veri </td></tr>
    <tr><td class="paramname">ciphertextLen</td><td>Şifrelenmiş veri uzunluğu </td></tr>
    <tr><td class="paramname">plaintext</td><td>Şifre çözülmüş veri çıktısı </td></tr>
    <tr><td class="paramname">plaintextLen</td><td>Şifre çözülmüş veri uzunluğu (çıktı) </td></tr>
    <tr><td class="paramname">iv</td><td>IV (nullptr ise ciphertext'in başından okunur) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen anahtar ile şifrelenmiş veriyi AES-CBC modunda çözer. IV (Initialization Vector) belirtilmemişse, ciphertext'in ilk 16 byte'ı IV olarak kullanılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). AES-CBC-PAD mekanizması kullanılır, bu nedenle padding otomatik olarak kaldırılır. Plaintext boyutu, ciphertext boyutundan küçük veya eşit olabilir.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Şifre çözme anahtarının ID'si (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu </td></tr>
    <tr><td class="paramname">ciphertext</td><td>Şifrelenmiş veri (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">ciphertextLen</td><td>Şifrelenmiş veri uzunluğu (byte, 0 ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">plaintext</td><td>Çözülmüş veri çıktısı (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">plaintextLen</td><td>plaintext buffer boyutu (giriş), çözülmüş veri boyutu (çıktı) </td></tr>
    <tr><td class="paramname">iv</td><td>Initialization Vector (nullptr ise ciphertext'in ilk 16 byte'ı kullanılır) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>IV (Initialization Vector) alma</p>
<p>Eğer IV verilmemişse, ciphertext'in ilk 16 byte'ı IV olarak kullanılır. Bu, yaygın bir uygulama pratiğidir (IV + ciphertext formatı). Eğer IV verilmemiş ve ciphertext 16 byte'dan küçükse, hata döner.</p>
<p>&lt; Local IV buffer (16 byte = AES block size)</p>
<p>IV verilmemiş ve ciphertext yeterli uzunlukta: Ciphertext'in ilk 16 byte'ı IV olarak kullanılır.</p>
<p>IV verilmemiş ve ciphertext yeterli uzunlukta değil: hata</p>
<p>AES-CBC mekanizması ayarlama</p>
<p>CKM_AES_CBC_PAD mekanizması kullanılır. Bu mekanizma, PKCS7 padding otomatik olarak kaldırır. IV, mechanism parametresi olarak belirtilir (16 byte).</p>
<p>&lt; AES-CBC modu + PKCS7 padding</p>
<p>&lt; IV (16 byte)</p>
<p>&lt; IV uzunluğu (16 byte)</p>
<p>IV (Initialization Vector) alma</p>
<p>Eğer IV verilmemişse, ciphertext'in ilk 16 byte'ı IV olarak kullanılır. Bu, yaygın bir uygulama pratiğidir (IV + ciphertext formatı). Eğer IV verilmemiş ve ciphertext 16 byte'dan küçükse, hata döner.</p>
<p>&lt; Local IV buffer (16 byte = AES block size)</p>
<p>IV verilmemiş ve ciphertext yeterli uzunlukta: Ciphertext'in ilk 16 byte'ı IV olarak kullanılır.</p>
<p>IV verilmemiş ve ciphertext yeterli uzunlukta değil: hata</p>
<p>AES-CBC mekanizması ayarlama</p>
<p>CKM_AES_CBC_PAD mekanizması kullanılır. Bu mekanizma, PKCS7 padding otomatik olarak kaldırır. IV, mechanism parametresi olarak belirtilir (16 byte).</p>
<p>&lt; AES-CBC modu + PKCS7 padding</p>
<p>&lt; IV (16 byte)</p>
<p>&lt; IV uzunluğu (16 byte)</p>

</div>
</div>
<a id="aa4b7ad5db79291a92b339855944a4208" name="aa4b7ad5db79291a92b339855944a4208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b7ad5db79291a92b339855944a4208">&#9670;&#160;</a></span>deleteKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::deleteKey </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyIdLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Anahtarı sil. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Anahtar ID uzunluğu </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen keyId'ye sahip anahtarı token üzerinden siler. C_DestroyObject kullanılarak anahtar kalıcı olarak silinir.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Anahtar silindikten sonra geri getirilemez.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Silinecek anahtarın ID'si (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu (CK_OBJECT_HANDLE boyutu olmalı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="aa76da1d2f45b48a32039219d89930d6b" name="aa76da1d2f45b48a32039219d89930d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa76da1d2f45b48a32039219d89930d6b">&#9670;&#160;</a></span>encrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::encrypt </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyIdLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>plaintext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>plaintextLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ciphertext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>ciphertextLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>iv</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Veriyi şifrele (encrypt using HSM key) </p>
<p>Veriyi şifrele (AES-CBC)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Anahtar ID uzunluğu </td></tr>
    <tr><td class="paramname">plaintext</td><td>Şifrelenecek veri </td></tr>
    <tr><td class="paramname">plaintextLen</td><td>Veri uzunluğu </td></tr>
    <tr><td class="paramname">ciphertext</td><td>Şifrelenmiş veri çıktısı </td></tr>
    <tr><td class="paramname">ciphertextLen</td><td>Şifrelenmiş veri uzunluğu (çıktı) </td></tr>
    <tr><td class="paramname">iv</td><td>IV çıktısı (nullptr ise otomatik oluşturulur) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen anahtar ile veriyi AES-CBC modunda şifreler. IV (Initialization Vector) belirtilmemişse, PKCS#11'nin rastgele sayı üreticisi ile oluşturulur.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). AES-CBC-PAD mekanizması kullanılır, bu nedenle padding otomatik olarak eklenir. Ciphertext boyutu, plaintext boyutundan büyük olabilir.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Şifreleme anahtarının ID'si (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu </td></tr>
    <tr><td class="paramname">plaintext</td><td>Şifrelenecek veri (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">plaintextLen</td><td>Veri uzunluğu (byte, 0 ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">ciphertext</td><td>Şifrelenmiş veri çıktısı (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">ciphertextLen</td><td>ciphertext buffer boyutu (giriş), şifrelenmiş veri boyutu (çıktı) </td></tr>
    <tr><td class="paramname">iv</td><td>Initialization Vector (nullptr ise otomatik oluşturulur) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>IV (Initialization Vector) oluşturma</p>
<p>Eğer IV verilmemişse, PKCS#11'nin rastgele sayı üreticisi ile 16 byte (128 bit) IV oluşturulur. IV, AES-CBC modunda her şifreleme işlemi için benzersiz olmalıdır.</p>
<p>&lt; Local IV buffer (16 byte = AES block size)</p>
<p>IV verilmemiş: PKCS#11 ile rastgele IV oluştur</p>
<p>AES-CBC mekanizması ayarlama</p>
<p>CKM_AES_CBC_PAD mekanizması kullanılır. Bu mekanizma, PKCS7 padding otomatik olarak ekler ve kaldırır. IV, mechanism parametresi olarak belirtilir (16 byte).</p>
<p>&lt; AES-CBC modu + PKCS7 padding</p>
<p>&lt; IV (16 byte)</p>
<p>&lt; IV uzunluğu (16 byte)</p>
<p>IV (Initialization Vector) oluşturma</p>
<p>Eğer IV verilmemişse, PKCS#11'nin rastgele sayı üreticisi ile 16 byte (128 bit) IV oluşturulur. IV, AES-CBC modunda her şifreleme işlemi için benzersiz olmalıdır.</p>
<p>&lt; Local IV buffer (16 byte = AES block size)</p>
<p>IV verilmemiş: PKCS#11 ile rastgele IV oluştur</p>
<p>AES-CBC mekanizması ayarlama</p>
<p>CKM_AES_CBC_PAD mekanizması kullanılır. Bu mekanizma, PKCS7 padding otomatik olarak ekler ve kaldırır. IV, mechanism parametresi olarak belirtilir (16 byte).</p>
<p>&lt; AES-CBC modu + PKCS7 padding</p>
<p>&lt; IV (16 byte)</p>
<p>&lt; IV uzunluğu (16 byte)</p>

</div>
</div>
<a id="af8527db38f2e8d22d54baf72e43315cf" name="af8527db38f2e8d22d54baf72e43315cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8527db38f2e8d22d54baf72e43315cf">&#9670;&#160;</a></span>findKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::findKey </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyLabel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>keyIdLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Anahtarı bul (find key by label) </p>
<p>Anahtarı label'a göre bul.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi </td></tr>
    <tr><td class="paramname">keyId</td><td>Çıktı: Bulunan anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Çıktı: Anahtar ID uzunluğu </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen label'a sahip anahtarı token üzerinde arar ve keyId'sini döndürür. Arama, C_FindObjectsInit ve C_FindObjects kullanılarak yapılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Anahtar bulunamazsa FileNotFound döner.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyId</td><td>Bulunan anahtarın ID'si (çıktı, nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu (giriş), bulunan ID boyutu (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu (Success, FileNotFound, InvalidInput) </dd></dl>

</div>
</div>
<a id="a100a3043a4e2c9d8cd6922248a46f335" name="a100a3043a4e2c9d8cd6922248a46f335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a100a3043a4e2c9d8cd6922248a46f335">&#9670;&#160;</a></span>generateKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::generateKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">KeyType</a>&#160;</td>
          <td class="paramname"><em>keyType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#ada96f17213af3032466f091866ca6e42">KeyUsage</a>&#160;</td>
          <td class="paramname"><em>keyUsage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyLabel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>keyIdLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Anahtar oluştur (generate key) </p>
<p>Kriptografik anahtar oluştur.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyType</td><td>Anahtar tipi (AES, RSA, EC) </td></tr>
    <tr><td class="paramname">keyUsage</td><td>Anahtar kullanım amacı </td></tr>
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi (identifier) </td></tr>
    <tr><td class="paramname">keyId</td><td>Çıktı: Oluşturulan anahtar ID'si </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen tipte ve kullanım amacına göre kriptografik anahtar oluşturur. Desteklenen anahtar tipleri: AES-256, RSA-2048, EC-P256. Anahtar, token üzerinde saklanır ve keyId olarak döndürülür.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Simetrik anahtarlar (AES) için C_GenerateKey, asimetrik anahtarlar (RSA, EC) için C_GenerateKeyPair kullanılır.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyType</td><td>Anahtar tipi (AES_256, RSA_2048, EC_P256) </td></tr>
    <tr><td class="paramname">keyUsage</td><td>Anahtar kullanım amacı (ENCRYPT_DECRYPT, SIGN_VERIFY, vb.) </td></tr>
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyId</td><td>Oluşturulan anahtarın ID'si (çıktı, nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu (giriş), oluşturulan ID boyutu (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>PKCS#11 mekanizma ve attribute template oluşturma</p>
<p>Key type'a göre uygun PKCS#11 mekanizması ve attribute template'leri oluşturulur. Her anahtar tipi için farklı mekanizma ve key class kullanılır.</p>
<p>&lt; Varsayılan: Secret key (AES için)</p>
<p>&lt; Varsayılan: AES key type</p>
<p>&lt; 32 bytes for AES-256</p>
<p>Anahtar tipine göre PKCS#11 mekanizması ve key class ayarlama</p>
<p>Her anahtar tipi için farklı PKCS#11 mekanizması ve key class kullanılır:</p><ul>
<li>AES_256: CKM_AES_KEY_GEN, CKO_SECRET_KEY, CKK_AES</li>
<li>RSA_2048: CKM_RSA_PKCS_KEY_PAIR_GEN, CKO_PRIVATE_KEY, CKK_RSA</li>
<li>EC_P256: CKM_EC_KEY_PAIR_GEN, CKO_PRIVATE_KEY, CKK_EC</li>
</ul>
<p>PKCS#11 attribute template oluşturma</p>
<p>Anahtar özelliklerini belirten PKCS#11 attribute'ları oluşturulur. Her attribute, anahtarın nasıl kullanılacağını ve saklanacağını belirtir.</p>
<p>&lt; Anahtar sınıfı (secret key veya private key)</p>
<p>&lt; Anahtar tipi (AES, RSA, EC)</p>
<p>&lt; Anahtar etiketi (kullanıcı tanımlı)</p>
<p>&lt; Boolean true değeri (PKCS#11 attribute'ları için)</p>
<p>&lt; Boolean false değeri (kullanılmıyor)</p>
<p>&lt; Anahtar token'da saklanacak (kalıcı)</p>
<p>&lt; Anahtar private (sadece PIN ile erişilebilir)</p>
<p>Key usage attributes - Anahtar kullanım amacına göre özellikler</p>
<p>Anahtarın hangi işlemler için kullanılabileceğini belirten attribute'lar eklenir:</p><ul>
<li>ENCRYPT_DECRYPT: CKA_ENCRYPT ve CKA_DECRYPT attribute'ları</li>
<li>SIGN_VERIFY: CKA_SIGN ve CKA_VERIFY attribute'ları</li>
</ul>
<p>AES için key size attribute'u</p>
<p>AES anahtarları için key size (256 bit = 32 byte) belirtilir. RSA ve EC anahtarları için key size attribute'u gerekmez.</p>
<p>&lt; AES anahtar uzunluğu (32 byte)</p>
<p>PKCS#11 anahtar oluşturma</p>
<p>Simetrik anahtarlar (AES) için C_GenerateKey, asimetrik anahtarlar (RSA, EC) için C_GenerateKeyPair kullanılır. Key pair generation için public key template'i de oluşturulmalıdır.</p>
<p>&lt; Oluşturulan anahtar handle'ı</p>
<p>&lt; PKCS#11 return code</p>
<p>Key pair generation - Public key template</p>
<p>Asimetrik anahtarlar (RSA, EC) için public key template'i oluşturulur. Public key template'i, key class ve key type bilgilerini içerir.</p>
<p>&lt; Public key attribute template</p>
<p>&lt; Public key template attribute sayısı</p>
<p>Key ID oluşturma</p>
<p>Oluşturulan anahtarın handle'ı keyId olarak kullanılır. Eğer keyId buffer yeterli büyüklükteyse (CK_OBJECT_HANDLE boyutu), handle kopyalanır. Aksi takdirde, label'den hash oluşturulur.</p>
<p>Key ID buffer yeterli: handle'ı kopyala</p>
<p>Key ID buffer küçük: label'den hash oluştur</p>
<p>Bu durumda, label'ın ilk N karakteri keyId olarak kullanılır. N, keyId buffer boyutu ve label uzunluğunun minimum'udur.</p>
<p>PKCS#11 mekanizma ve attribute template oluşturma</p>
<p>Key type'a göre uygun PKCS#11 mekanizması ve attribute template'leri oluşturulur. Her anahtar tipi için farklı mekanizma ve key class kullanılır.</p>
<p>&lt; Varsayılan: Secret key (AES için)</p>
<p>&lt; Varsayılan: AES key type</p>
<p>&lt; 32 bytes for AES-256</p>
<p>Anahtar tipine göre PKCS#11 mekanizması ve key class ayarlama</p>
<p>Her anahtar tipi için farklı PKCS#11 mekanizması ve key class kullanılır:</p><ul>
<li>AES_256: CKM_AES_KEY_GEN, CKO_SECRET_KEY, CKK_AES</li>
<li>RSA_2048: CKM_RSA_PKCS_KEY_PAIR_GEN, CKO_PRIVATE_KEY, CKK_RSA</li>
<li>EC_P256: CKM_EC_KEY_PAIR_GEN, CKO_PRIVATE_KEY, CKK_EC</li>
</ul>
<p>PKCS#11 attribute template oluşturma</p>
<p>Anahtar özelliklerini belirten PKCS#11 attribute'ları oluşturulur. Her attribute, anahtarın nasıl kullanılacağını ve saklanacağını belirtir.</p>
<p>&lt; Anahtar sınıfı (secret key veya private key)</p>
<p>&lt; Anahtar tipi (AES, RSA, EC)</p>
<p>&lt; Anahtar etiketi (kullanıcı tanımlı)</p>
<p>&lt; Boolean true değeri (PKCS#11 attribute'ları için)</p>
<p>&lt; Boolean false değeri (kullanılmıyor)</p>
<p>&lt; Anahtar token'da saklanacak (kalıcı)</p>
<p>&lt; Anahtar private (sadece PIN ile erişilebilir)</p>
<p>Key usage attributes - Anahtar kullanım amacına göre özellikler</p>
<p>Anahtarın hangi işlemler için kullanılabileceğini belirten attribute'lar eklenir:</p><ul>
<li>ENCRYPT_DECRYPT: CKA_ENCRYPT ve CKA_DECRYPT attribute'ları</li>
<li>SIGN_VERIFY: CKA_SIGN ve CKA_VERIFY attribute'ları</li>
</ul>
<p>AES için key size attribute'u</p>
<p>AES anahtarları için key size (256 bit = 32 byte) belirtilir. RSA ve EC anahtarları için key size attribute'u gerekmez.</p>
<p>&lt; AES anahtar uzunluğu (32 byte)</p>
<p>PKCS#11 anahtar oluşturma</p>
<p>Simetrik anahtarlar (AES) için C_GenerateKey, asimetrik anahtarlar (RSA, EC) için C_GenerateKeyPair kullanılır. Key pair generation için public key template'i de oluşturulmalıdır.</p>
<p>&lt; Oluşturulan anahtar handle'ı</p>
<p>&lt; PKCS#11 return code</p>
<p>Key pair generation - Public key template</p>
<p>Asimetrik anahtarlar (RSA, EC) için public key template'i oluşturulur. Public key template'i, key class ve key type bilgilerini içerir.</p>
<p>&lt; Public key attribute template</p>
<p>&lt; Public key template attribute sayısı</p>
<p>Key ID oluşturma</p>
<p>Oluşturulan anahtarın handle'ı keyId olarak kullanılır. Eğer keyId buffer yeterli büyüklükteyse (CK_OBJECT_HANDLE boyutu), handle kopyalanır. Aksi takdirde, label'den hash oluşturulur.</p>
<p>Key ID buffer yeterli: handle'ı kopyala</p>
<p>Key ID buffer küçük: label'den hash oluştur</p>
<p>Bu durumda, label'ın ilk N karakteri keyId olarak kullanılır. N, keyId buffer boyutu ve label uzunluğunun minimum'udur.</p>

</div>
</div>
<a id="ac132d386ec4642b70cbfc87db1dd84f3" name="ac132d386ec4642b70cbfc87db1dd84f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac132d386ec4642b70cbfc87db1dd84f3">&#9670;&#160;</a></span>generateRandom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::generateRandom </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rastgele veri üret (HSM'den güvenli random) </p>
<p>Kriptografik olarak güvenli rastgele veri üret.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>Rastgele veri çıktısı </td></tr>
    <tr><td class="paramname">length</td><td>İstenen uzunluk (byte) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>PKCS#11'nin rastgele sayı üreticisini kullanarak kriptografik olarak güvenli rastgele veri üretir. C_GenerateRandom fonksiyonu kullanılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Üretilen rastgele veriler, kriptografik işlemler için uygundur (IV, salt, vb.).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>Rastgele veri çıktısı (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">length</td><td>Üretilecek veri uzunluğu (byte, 0 ise InvalidInput döner) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="a0fa272e6522244baa0af55f77332e6f5" name="a0fa272e6522244baa0af55f77332e6f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa272e6522244baa0af55f77332e6f5">&#9670;&#160;</a></span>getStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24a">InitStatus</a> TravelExpense::SoftHSM::getStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> başlatma durumunu kontrol et. </p>
<dl class="section return"><dt>Returns</dt><dd>InitStatus Başlatma durumu</dd></dl>
<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> modülünün mevcut başlatma durumunu döndürür.</p>
<dl class="section return"><dt>Returns</dt><dd>InitStatus Mevcut durum (NOT_INITIALIZED, INITIALIZED, ERROR) </dd></dl>

</div>
</div>
<a id="a04b9cc48d95cd483ab84818c43ed967d" name="a04b9cc48d95cd483ab84818c43ed967d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04b9cc48d95cd483ab84818c43ed967d">&#9670;&#160;</a></span>importKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::importKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a8859119f0e92029bcc9c29081d79021a">KeyType</a>&#160;</td>
          <td class="paramname"><em>keyType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyDataLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyLabel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>keyIdLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Anahtarı içe aktar (import key) </p>
<p>Anahtarı import et (simplified)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyType</td><td>Anahtar tipi </td></tr>
    <tr><td class="paramname">keyData</td><td>Anahtar verisi </td></tr>
    <tr><td class="paramname">keyDataLen</td><td>Anahtar verisi uzunluğu </td></tr>
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi </td></tr>
    <tr><td class="paramname">keyId</td><td>Çıktı: İçe aktarılan anahtar ID'si </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen anahtar verisini token üzerine import eder. C_CreateObject kullanılarak anahtar oluşturulur ve token üzerinde saklanır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Desteklenen anahtar tipleri: AES-256, RSA-2048, EC-P256. Anahtar, token üzerinde saklanır ve keyId olarak döndürülür.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyType</td><td>Anahtar tipi (AES_256, RSA_2048, EC_P256) </td></tr>
    <tr><td class="paramname">keyData</td><td>Import edilecek anahtar verisi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyDataLen</td><td>Anahtar verisi uzunluğu (byte, 0 ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyLabel</td><td>Anahtar etiketi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyId</td><td>Import edilen anahtarın ID'si (çıktı, nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu (giriş), oluşturulan ID boyutu (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>PKCS#11 attribute template oluşturma (import için)</p>
<p>Import edilecek anahtar için PKCS#11 attribute template'i oluşturulur. Anahtar tipine göre farklı key class ve key type kullanılır.</p>
<p>&lt; Attribute template dizisi (max 10 attribute)</p>
<p>&lt; Template attribute sayısı</p>
<p>&lt; Varsayılan: Secret key (AES için)</p>
<p>&lt; Varsayılan: AES key type</p>
<p>&lt; Boolean true değeri</p>
<p>Anahtar tipine göre key class ve key type ayarlama</p>
<p>Her anahtar tipi için farklı key class ve key type kullanılır:</p><ul>
<li>AES_256: CKO_SECRET_KEY, CKK_AES</li>
<li>RSA_2048: CKO_PRIVATE_KEY, CKK_RSA</li>
<li>EC_P256: CKO_PRIVATE_KEY, CKK_EC</li>
</ul>
<p>PKCS#11 attribute template oluşturma (import anahtar için)</p>
<p>Import edilecek anahtar için gerekli attribute'lar oluşturulur:</p><ul>
<li>CKA_CLASS: Anahtar sınıfı (secret key veya private key)</li>
<li>CKA_KEY_TYPE: Anahtar tipi (AES, RSA, EC)</li>
<li>CKA_LABEL: Anahtar etiketi</li>
<li>CKA_VALUE: Anahtar verisi (import edilecek anahtar)</li>
<li>CKA_TOKEN: Token'da saklanacak (kalıcı)</li>
<li>CKA_ENCRYPT/CKA_DECRYPT: Şifreleme/şifre çözme için kullanılabilir</li>
</ul>
<p>&lt; Anahtar sınıfı</p>
<p>&lt; Anahtar tipi</p>
<p>&lt; Anahtar etiketi</p>
<p>&lt; Anahtar verisi (import edilecek)</p>
<p>&lt; Token'da saklanacak (kalıcı)</p>
<p>&lt; Şifreleme için kullanılabilir</p>
<p>&lt; Şifre çözme için kullanılabilir</p>
<p>PKCS#11 anahtar oluşturma (import)</p>
<p>C_CreateObject ile import edilecek anahtar token üzerinde oluşturulur. Anahtar verisi (CKA_VALUE) template içinde belirtilir.</p>
<p>&lt; Oluşturulan anahtar handle'ı</p>
<p>Key ID oluşturma (import için)</p>
<p>Import edilen anahtarın handle'ı keyId olarak kullanılır. keyId buffer, CK_OBJECT_HANDLE boyutunda olmalıdır. Eğer buffer yeterli değilse, InvalidInput hatası döner.</p>
<p>Key ID buffer yeterli: handle'ı kopyala</p>
<p>Key ID buffer yetersiz: hata döner</p>
<p>Import işleminde, keyId buffer mutlaka CK_OBJECT_HANDLE boyutunda olmalıdır. Aksi takdirde, handle kopyalanamaz.</p>
<p>PKCS#11 attribute template oluşturma (import için)</p>
<p>Import edilecek anahtar için PKCS#11 attribute template'i oluşturulur. Anahtar tipine göre farklı key class ve key type kullanılır.</p>
<p>&lt; Attribute template dizisi (max 10 attribute)</p>
<p>&lt; Template attribute sayısı</p>
<p>&lt; Varsayılan: Secret key (AES için)</p>
<p>&lt; Varsayılan: AES key type</p>
<p>&lt; Boolean true değeri</p>
<p>Anahtar tipine göre key class ve key type ayarlama</p>
<p>Her anahtar tipi için farklı key class ve key type kullanılır:</p><ul>
<li>AES_256: CKO_SECRET_KEY, CKK_AES</li>
<li>RSA_2048: CKO_PRIVATE_KEY, CKK_RSA</li>
<li>EC_P256: CKO_PRIVATE_KEY, CKK_EC</li>
</ul>
<p>PKCS#11 attribute template oluşturma (import anahtar için)</p>
<p>Import edilecek anahtar için gerekli attribute'lar oluşturulur:</p><ul>
<li>CKA_CLASS: Anahtar sınıfı (secret key veya private key)</li>
<li>CKA_KEY_TYPE: Anahtar tipi (AES, RSA, EC)</li>
<li>CKA_LABEL: Anahtar etiketi</li>
<li>CKA_VALUE: Anahtar verisi (import edilecek anahtar)</li>
<li>CKA_TOKEN: Token'da saklanacak (kalıcı)</li>
<li>CKA_ENCRYPT/CKA_DECRYPT: Şifreleme/şifre çözme için kullanılabilir</li>
</ul>
<p>&lt; Anahtar sınıfı</p>
<p>&lt; Anahtar tipi</p>
<p>&lt; Anahtar etiketi</p>
<p>&lt; Anahtar verisi (import edilecek)</p>
<p>&lt; Token'da saklanacak (kalıcı)</p>
<p>&lt; Şifreleme için kullanılabilir</p>
<p>&lt; Şifre çözme için kullanılabilir</p>
<p>PKCS#11 anahtar oluşturma (import)</p>
<p>C_CreateObject ile import edilecek anahtar token üzerinde oluşturulur. Anahtar verisi (CKA_VALUE) template içinde belirtilir.</p>
<p>&lt; Oluşturulan anahtar handle'ı</p>
<p>Key ID oluşturma (import için)</p>
<p>Import edilen anahtarın handle'ı keyId olarak kullanılır. keyId buffer, CK_OBJECT_HANDLE boyutunda olmalıdır. Eğer buffer yeterli değilse, InvalidInput hatası döner.</p>
<p>Key ID buffer yeterli: handle'ı kopyala</p>
<p>Key ID buffer yetersiz: hata döner</p>
<p>Import işleminde, keyId buffer mutlaka CK_OBJECT_HANDLE boyutunda olmalıdır. Aksi takdirde, handle kopyalanamaz.</p>

</div>
</div>
<a id="af71b3824984e7e34e84fc5c0a606b418" name="af71b3824984e7e34e84fc5c0a606b418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71b3824984e7e34e84fc5c0a606b418">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::initialize </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>libraryPath</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tokenLabel</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pin</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'yi başlat ve PKCS#11 kütüphanesini yükle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">libraryPath</td><td><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> PKCS#11 kütüphanesi yolu (nullptr ise otomatik bulma yapılır) </td></tr>
    <tr><td class="paramname">tokenLabel</td><td>Token etiketi (nullptr ise varsayılan token oluşturulur) </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu (nullptr ise varsayılan "1234" kullanılır) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> modülünü başlatır ve belirtilen PKCS#11 kütüphanesini yükler. Eğer <code>libraryPath</code> nullptr ise, sistemdeki varsayılan kütüphane aranır. <code>tokenLabel</code> ve <code>pin</code> nullptr ise varsayılan değerler kullanılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, zaten başlatılmışsa (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24aadee5f03c2c4e73657824e028494b18c0" title="SoftHSM başarıyla başlatıldı">InitStatus::INITIALIZED</a>) hiçbir işlem yapmaz ve Success döner. PKCS#11 kütüphanesi yüklendikten sonra, C_Initialize() çağrılır ve token label ile PIN kaydedilir.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">libraryPath</td><td><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> PKCS#11 kütüphanesi yolu (nullptr ise otomatik bulma yapılır) </td></tr>
    <tr><td class="paramname">tokenLabel</td><td>Token etiketi (nullptr ise varsayılan "TravelExpense" kullanılır) </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu (nullptr ise varsayılan "1234" kullanılır) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="ae037de28b34ae8a110a65f222e52ac06" name="ae037de28b34ae8a110a65f222e52ac06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae037de28b34ae8a110a65f222e52ac06">&#9670;&#160;</a></span>listKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::listKeys </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>labels</em>[][64], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mevcut anahtarları listele. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">labels</td><td>Çıktı: Anahtar etiketleri dizisi (max 50 key) </td></tr>
    <tr><td class="paramname">count</td><td>Çıktı: Bulunan anahtar sayısı </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Token üzerinde mevcut tüm secret key'lerin label'larını listeler. C_FindObjectsInit, C_FindObjects ve C_GetAttributeValue kullanılarak anahtar bilgileri alınır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Maksimum 50 anahtar listelenir. Sadece secret key'ler listelenir.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">labels</td><td>Anahtar label'ları dizisi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">count</td><td>labels dizisi boyutu (giriş), bulunan anahtar sayısı (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>Anahtar label'larını toplama</p>
<p>Token üzerindeki tüm secret key'lerin label'ları alınır ve listeye eklenir. Maksimum 50 anahtar listelenir (performans için sınır). Her anahtar için C_GetAttributeValue ile label attribute'u alınır.</p>
<p>&lt; Bulunan anahtar sayısı</p>
<p>&lt; Maksimum listelenecek anahtar sayısı</p>
<p>Anahtar bulma ve label alma döngüsü</p>
<p>C_FindObjects ile her iterasyonda bir anahtar bulunur. Her anahtar için C_GetAttributeValue ile label attribute'u alınır. Label bulunursa, listeye eklenir.</p>
<p>&lt; Bulunan anahtar handle'ı</p>
<p>&lt; Bulunan obje sayısı</p>
<p>Anahtar bulunamadı: döngüden çık</p>
<p>Label attribute'unu alma</p>
<p>C_GetAttributeValue ile anahtarın CKA_LABEL attribute'u alınır. Label, 64 karakter buffer'a yazılır ve null-terminated olarak ayarlanır.</p>
<p>&lt; Label attribute tipi</p>
<p>&lt; Label buffer (64 karakter)</p>
<p>&lt; Buffer boyutu - 1 (null terminator için)</p>
<p>Label başarıyla alındı: listeye ekle</p>
<p>&lt; Null terminator garanti</p>
<p>Anahtar label'larını toplama</p>
<p>Token üzerindeki tüm secret key'lerin label'ları alınır ve listeye eklenir. Maksimum 50 anahtar listelenir (performans için sınır). Her anahtar için C_GetAttributeValue ile label attribute'u alınır.</p>
<p>&lt; Bulunan anahtar sayısı</p>
<p>&lt; Maksimum listelenecek anahtar sayısı</p>
<p>Anahtar bulma ve label alma döngüsü</p>
<p>C_FindObjects ile her iterasyonda bir anahtar bulunur. Her anahtar için C_GetAttributeValue ile label attribute'u alınır. Label bulunursa, listeye eklenir.</p>
<p>&lt; Bulunan anahtar handle'ı</p>
<p>&lt; Bulunan obje sayısı</p>
<p>Anahtar bulunamadı: döngüden çık</p>
<p>Label attribute'unu alma</p>
<p>C_GetAttributeValue ile anahtarın CKA_LABEL attribute'u alınır. Label, 64 karakter buffer'a yazılır ve null-terminated olarak ayarlanır.</p>
<p>&lt; Label attribute tipi</p>
<p>&lt; Label buffer (64 karakter)</p>
<p>&lt; Buffer boyutu - 1 (null terminator için)</p>
<p>Label başarıyla alındı: listeye ekle</p>
<p>&lt; Null terminator garanti</p>

</div>
</div>
<a id="a627d80f41250c6562b1cd91521787245" name="a627d80f41250c6562b1cd91521787245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627d80f41250c6562b1cd91521787245">&#9670;&#160;</a></span>listTokens()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::listTokens </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>labels</em>[][64], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mevcut token'ları listele. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">labels</td><td>Çıktı: Token etiketleri dizisi (max 10 token) </td></tr>
    <tr><td class="paramname">count</td><td>Çıktı: Bulunan token sayısı </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Sistemde mevcut tüm token'ların label'larını listeler. C_GetSlotList ve C_GetTokenInfo kullanılarak token bilgileri alınır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'nin INITIALIZED durumunda olmasını gerektirir. Maksimum 10 token listelenir. Token label'ları, boşluklarla doldurulmuş olabilir, bu nedenle son boşluklar temizlenir.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">labels</td><td>Token label'ları dizisi (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">count</td><td>labels dizisi boyutu (giriş), bulunan token sayısı (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>Token label'larını toplama</p>
<p>Her slot'taki token'ın label'ı alınır ve listeye eklenir. Maksimum 10 token listelenir (performans için sınır). Token label'ları PKCS#11'de boşluklarla doldurulmuş olabilir, bu nedenle son boşluklar temizlenir.</p>
<p>&lt; Bulunan token sayısı</p>
<p>&lt; Token bilgisi</p>
<p>Token bulundu: Label'i kopyala ve boşlukları temizle</p>
<p>PKCS#11 token label'ları 32 byte uzunluğunda ve null-terminated değildir. Boşluklarla doldurulmuş olabilir, bu nedenle son boşluklar temizlenir.</p>
<p>Token label'larını toplama</p>
<p>Her slot'taki token'ın label'ı alınır ve listeye eklenir. Maksimum 10 token listelenir (performans için sınır). Token label'ları PKCS#11'de boşluklarla doldurulmuş olabilir, bu nedenle son boşluklar temizlenir.</p>
<p>&lt; Bulunan token sayısı</p>
<p>&lt; Token bilgisi</p>
<p>Token bulundu: Label'i kopyala ve boşlukları temizle</p>
<p>PKCS#11 token label'ları 32 byte uzunluğunda ve null-terminated değildir. Boşluklarla doldurulmuş olabilir, bu nedenle son boşluklar temizlenir.</p>

</div>
</div>
<a id="a1dd53afa782d6054163658a225a3e3bf" name="a1dd53afa782d6054163658a225a3e3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd53afa782d6054163658a225a3e3bf">&#9670;&#160;</a></span>openToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::openToken </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Token aç (oturum başlat) </p>
<p>Token aç ve session başlat.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>Token etiketi (nullptr ise varsayılan token) </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen token'ı açar ve PKCS#11 session başlatır. Token label'a göre slot listesinde token aranır, bulunduktan sonra session açılır ve PIN ile login yapılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, <a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'nin INITIALIZED durumunda olmasını gerektirir. Eğer label nullptr ise, kaydedilmiş g_tokenLabel kullanılır. Eğer pin nullptr ise, kaydedilmiş g_pin kullanılır.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>Token etiketi (nullptr ise kaydedilmiş label kullanılır) </td></tr>
    <tr><td class="paramname">pin</td><td>PIN kodu (nullptr ise kaydedilmiş PIN kullanılır) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>Slot listesi alma</p>
<p>C_GetSlotList ile token içeren slot'ların listesi alınır. İlk çağrıda slot sayısı alınır, ikinci çağrıda slot ID'leri alınır.</p>
<p>&lt; Token içeren slot sayısı (çıktı)</p>
<p>&lt; Slot ID'leri dizisi</p>
<p>Label'a göre token bulma</p>
<p>Her slot'taki token'ın label'ı kontrol edilir ve aranan label ile karşılaştırılır. Token label'ları PKCS#11'de null-terminated değildir, boşluklarla doldurulmuş olabilir, bu nedenle temizlenir.</p>
<p>&lt; Varsayılan olarak ilk slot</p>
<p>&lt; Aranacak token label</p>
<p>Token label karşılaştırması</p>
<p>Her slot'taki token'ın label'ı C_GetTokenInfo ile alınır ve aranan label ile karşılaştırılır. Eşleşme bulunursa, o slot seçilir.</p>
<p>PKCS#11 session açma</p>
<p>Seçilen slot'ta read-write session açılır. CKF_RW_SESSION flag'i ile yazma işlemleri yapılabilir, CKF_SERIAL_SESSION flag'i ile serial session açılır (paralel session değil).</p>
<p>&lt; Read-write ve serial session flag'leri</p>
<p>PIN ile login</p>
<p>Kullanıcı PIN'i ile token'a login yapılır. CKU_USER ile normal kullanıcı olarak login yapılır. Eğer zaten login yapılmışsa (CKR_USER_ALREADY_LOGGED_IN), hata olarak kabul edilmez.</p>
<p>&lt; Kullanılacak PIN (parametre veya kaydedilmiş)</p>
<p>Slot listesi alma</p>
<p>C_GetSlotList ile token içeren slot'ların listesi alınır. İlk çağrıda slot sayısı alınır, ikinci çağrıda slot ID'leri alınır.</p>
<p>&lt; Token içeren slot sayısı (çıktı)</p>
<p>&lt; Slot ID'leri dizisi</p>
<p>Label'a göre token bulma</p>
<p>Her slot'taki token'ın label'ı kontrol edilir ve aranan label ile karşılaştırılır. Token label'ları PKCS#11'de null-terminated değildir, boşluklarla doldurulmuş olabilir, bu nedenle temizlenir.</p>
<p>&lt; Varsayılan olarak ilk slot</p>
<p>&lt; Aranacak token label</p>
<p>Token label karşılaştırması</p>
<p>Her slot'taki token'ın label'ı C_GetTokenInfo ile alınır ve aranan label ile karşılaştırılır. Eşleşme bulunursa, o slot seçilir.</p>
<p>PKCS#11 session açma</p>
<p>Seçilen slot'ta read-write session açılır. CKF_RW_SESSION flag'i ile yazma işlemleri yapılabilir, CKF_SERIAL_SESSION flag'i ile serial session açılır (paralel session değil).</p>
<p>&lt; Read-write ve serial session flag'leri</p>
<p>PIN ile login</p>
<p>Kullanıcı PIN'i ile token'a login yapılır. CKU_USER ile normal kullanıcı olarak login yapılır. Eğer zaten login yapılmışsa (CKR_USER_ALREADY_LOGGED_IN), hata olarak kabul edilmez.</p>
<p>&lt; Kullanılacak PIN (parametre veya kaydedilmiş)</p>

</div>
</div>
<a id="aa08cccf8f5db8d63231a3b706351b212" name="aa08cccf8f5db8d63231a3b706351b212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa08cccf8f5db8d63231a3b706351b212">&#9670;&#160;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a>'yi kapat ve kaynakları temizle. </p>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p><a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html">SoftHSM</a> modülünü kapatır ve tüm kaynakları temizler. Açık session varsa kapatılır, PKCS#11 finalize edilir ve dinamik kütüphane kapatılır. Token label ve PIN bilgileri güvenli şekilde temizlenir.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, zaten kapatılmışsa (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#aad0a58fc42af71a6793bf6449a75b24aa02de9649e258d1dd94056e676061e969" title="SoftHSM henüz başlatılmadı">InitStatus::NOT_INITIALIZED</a>) hiçbir işlem yapmaz ve Success döner.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>

</div>
</div>
<a id="ac14ac62bb1ee91f10908af2ba8f7a832" name="ac14ac62bb1ee91f10908af2ba8f7a832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14ac62bb1ee91f10908af2ba8f7a832">&#9670;&#160;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_travel_expense.html#a3bda90e999d060d311aeaafaca383dab">ErrorCode</a> TravelExpense::SoftHSM::sign </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyIdLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dataLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>signatureLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Veriyi imzala (sign data) </p>
<p>Veriyi imzala (SHA256-RSA-PKCS)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Anahtar ID uzunluğu </td></tr>
    <tr><td class="paramname">data</td><td>İmzalanacak veri </td></tr>
    <tr><td class="paramname">dataLen</td><td>Veri uzunluğu </td></tr>
    <tr><td class="paramname">signature</td><td>İmza çıktısı </td></tr>
    <tr><td class="paramname">signatureLen</td><td>İmza uzunluğu (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu</dd></dl>
<p>Belirtilen anahtar ile veriyi SHA256 hash'leyip RSA-PKCS imzası oluşturur. SHA256-RSA-PKCS mekanizması kullanılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Veri önce SHA256 ile hash'lenir, sonra RSA ile imzalanır. Signature boyutu, RSA anahtar boyutuna bağlıdır (2048-bit için 256 byte).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>İmzalama anahtarının ID'si (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu </td></tr>
    <tr><td class="paramname">data</td><td>İmzalanacak veri (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">dataLen</td><td>Veri uzunluğu (byte, 0 ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">signature</td><td>İmza çıktısı (nullptr ise InvalidInput döner) </td></tr>
    <tr><td class="paramname">signatureLen</td><td>signature buffer boyutu (giriş), imza boyutu (çıktı) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ErrorCode Başarı durumu </dd></dl>
<p>SHA256-RSA-PKCS mekanizması ayarlama</p>
<p>CKM_SHA256_RSA_PKCS mekanizması kullanılır. Bu mekanizma, veriyi önce SHA-256 ile hash'ler, sonra RSA-PKCS ile imzalar. Parametre gerektirmez.</p>
<p>&lt; SHA-256 hash + RSA-PKCS imzalama</p>
<p>&lt; Parametre gerekmez</p>
<p>&lt; Parametre uzunluğu 0</p>
<p>İmzalama işlemini başlatma</p>
<p>C_SignInit ile imzalama mekanizması ve anahtar ayarlanır. Bu işlem, sonraki C_Sign çağrısı için hazırlık yapar.</p>
<p>Veriyi imzalama</p>
<p>C_Sign ile veri imzalanır. Veri önce SHA-256 ile hash'lenir, sonra RSA-PKCS ile imzalanır. İmza boyutu, RSA anahtar boyutuna bağlıdır (2048-bit için 256 byte).</p>
<p>&lt; İmza buffer boyutu (giriş), gerçek imza boyutu (çıktı)</p>
<p>SHA256-RSA-PKCS mekanizması ayarlama</p>
<p>CKM_SHA256_RSA_PKCS mekanizması kullanılır. Bu mekanizma, veriyi önce SHA-256 ile hash'ler, sonra RSA-PKCS ile imzalar. Parametre gerektirmez.</p>
<p>&lt; SHA-256 hash + RSA-PKCS imzalama</p>
<p>&lt; Parametre gerekmez</p>
<p>&lt; Parametre uzunluğu 0</p>
<p>İmzalama işlemini başlatma</p>
<p>C_SignInit ile imzalama mekanizması ve anahtar ayarlanır. Bu işlem, sonraki C_Sign çağrısı için hazırlık yapar.</p>
<p>Veriyi imzalama</p>
<p>C_Sign ile veri imzalanır. Veri önce SHA-256 ile hash'lenir, sonra RSA-PKCS ile imzalanır. İmza boyutu, RSA anahtar boyutuna bağlıdır (2048-bit için 256 byte).</p>
<p>&lt; İmza buffer boyutu (giriş), gerçek imza boyutu (çıktı)</p>

</div>
</div>
<a id="a6e1b43ac34b60670eafe4cb1c347335a" name="a6e1b43ac34b60670eafe4cb1c347335a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e1b43ac34b60670eafe4cb1c347335a">&#9670;&#160;</a></span>verify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TravelExpense::SoftHSM::verify </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>keyId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyIdLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dataLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>signatureLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>İmzayı doğrula (verify signature) </p>
<p>İmzayı doğrula (SHA256-RSA-PKCS)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Anahtar ID'si </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>Anahtar ID uzunluğu </td></tr>
    <tr><td class="paramname">data</td><td>İmzalanmış veri </td></tr>
    <tr><td class="paramname">dataLen</td><td>Veri uzunluğu </td></tr>
    <tr><td class="paramname">signature</td><td>İmza </td></tr>
    <tr><td class="paramname">signatureLen</td><td>İmza uzunluğu </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true İmza geçerli, false Geçersiz</dd></dl>
<p>Belirtilen anahtar ile veriyi SHA256 hash'leyip RSA-PKCS imzasını doğrular. SHA256-RSA-PKCS mekanizması kullanılır.</p>
<dl class="section note"><dt>Note</dt><dd>Bu fonksiyon, açık bir session gerektirir (<a class="el" href="namespace_travel_expense_1_1_soft_h_s_m.html#a1dd53afa782d6054163658a225a3e3bf" title="Token aç (oturum başlat)">openToken()</a> çağrılmış olmalı). Veri önce SHA256 ile hash'lenir, sonra RSA ile imza doğrulanır.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyId</td><td>Doğrulama anahtarının ID'si (nullptr ise false döner) </td></tr>
    <tr><td class="paramname">keyIdLen</td><td>keyId buffer boyutu </td></tr>
    <tr><td class="paramname">data</td><td>Doğrulanacak veri (nullptr ise false döner) </td></tr>
    <tr><td class="paramname">dataLen</td><td>Veri uzunluğu (byte, 0 ise false döner) </td></tr>
    <tr><td class="paramname">signature</td><td>İmza (nullptr ise false döner) </td></tr>
    <tr><td class="paramname">signatureLen</td><td>İmza uzunluğu (byte, 0 ise false döner) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true İmza geçerli, false İmza geçersiz veya hata </dd></dl>
<p>SHA256-RSA-PKCS mekanizması ayarlama</p>
<p>CKM_SHA256_RSA_PKCS mekanizması kullanılır. Bu mekanizma, veriyi önce SHA-256 ile hash'ler, sonra RSA-PKCS ile imza doğrular. Parametre gerektirmez.</p>
<p>&lt; SHA-256 hash + RSA-PKCS imza doğrulama</p>
<p>&lt; Parametre gerekmez</p>
<p>&lt; Parametre uzunluğu 0</p>
<p>İmza doğrulama işlemini başlatma</p>
<p>C_VerifyInit ile imza doğrulama mekanizması ve anahtar ayarlanır. Bu işlem, sonraki C_Verify çağrısı için hazırlık yapar.</p>
<p>İmzayı doğrulama</p>
<p>C_Verify ile imza doğrulanır. Veri önce SHA-256 ile hash'lenir, sonra RSA-PKCS ile imza doğrulanır. İmza geçerliyse CKR_OK döner.</p>
<p>&lt; true = imza geçerli, false = imza geçersiz veya hata</p>
<p>SHA256-RSA-PKCS mekanizması ayarlama</p>
<p>CKM_SHA256_RSA_PKCS mekanizması kullanılır. Bu mekanizma, veriyi önce SHA-256 ile hash'ler, sonra RSA-PKCS ile imza doğrular. Parametre gerektirmez.</p>
<p>&lt; SHA-256 hash + RSA-PKCS imza doğrulama</p>
<p>&lt; Parametre gerekmez</p>
<p>&lt; Parametre uzunluğu 0</p>
<p>İmza doğrulama işlemini başlatma</p>
<p>C_VerifyInit ile imza doğrulama mekanizması ve anahtar ayarlanır. Bu işlem, sonraki C_Verify çağrısı için hazırlık yapar.</p>
<p>İmzayı doğrulama</p>
<p>C_Verify ile imza doğrulanır. Veri önce SHA-256 ile hash'lenir, sonra RSA-PKCS ile imza doğrulanır. İmza geçerliyse CKR_OK döner.</p>
<p>&lt; true = imza geçerli, false = imza geçersiz veya hata</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
